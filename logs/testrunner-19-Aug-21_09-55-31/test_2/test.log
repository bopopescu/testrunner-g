[2019-08-21 10:13:27,905] - [fts_base] [123145496023040] - INFO - ==== FTSbasetests setup is started for test #2 test_planfreeze_control ====
[2019-08-21 10:13:28,008] - [rest_client] [123145496023040] - INFO - SUCCESS: FTS RAM quota set to 750mb
[2019-08-21 10:13:28,009] - [fts_base] [123145496023040] - INFO - removing nodes from cluster ...
[2019-08-21 10:13:28,059] - [fts_base] [123145496023040] - INFO - cleanup [ip:172.23.109.179 port:8091 ssh_username:root]
[2019-08-21 10:13:28,249] - [cluster_helper] [123145496023040] - INFO - waiting for ns_server @ 172.23.109.179:8091
[2019-08-21 10:13:28,275] - [cluster_helper] [123145496023040] - INFO - ns_server @ 172.23.109.179:8091 is running
[2019-08-21 10:13:28,276] - [fts_base] [123145496023040] - INFO - Removing user 'cbadminbucket'...
[2019-08-21 10:13:28,355] - [rest_client] [123145496023040] - ERROR - DELETE http://172.23.109.179:8091/settings/rbac/users/local/cbadminbucket body:  headers: {'Content-Type': 'application/x-www-form-urlencoded', 'Accept': '*/*', 'Authorization': 'Basic QWRtaW5pc3RyYXRvcjpwYXNzd29yZA==\n'} error: 404 reason: unknown "User was not found." auth: Administrator:password
[2019-08-21 10:13:28,356] - [fts_base] [123145496023040] - INFO - "User was not found."
[2019-08-21 10:13:28,357] - [fts_base] [123145496023040] - INFO - Initializing Cluster ...
[2019-08-21 10:13:28,955] - [task] [123145525469184] - INFO - server: ip:172.23.109.179 port:8091 ssh_username:root, nodes/self: {'ip': u'172.23.109.179', 'availableStorage': [], 'rest_username': '', 'id': u'ns_1@172.23.109.179', 'uptime': u'12970', 'mcdMemoryReserved': 2950, 'storageTotalRam': 3688, 'hostname': u'172.23.109.179:8091', 'storage': [<membase.api.rest_client.NodeDataStorage object at 0x10cda1e90>], 'moxi': 11211, 'port': u'8091', 'version': u'6.5.0-4076-enterprise', 'memcached': 11210, 'status': u'healthy', 'clusterCompatibility': 393221, 'curr_items': 0, 'services': [u'kv'], 'rest_password': '', 'clusterMembership': u'active', 'memoryFree': 3310497792, 'memoryTotal': 3867238400, 'memoryQuota': 1976, 'mcdMemoryAllocated': 2950, 'os': u'x86_64-unknown-linux-gnu', 'ports': []}
[2019-08-21 10:13:28,977] - [rest_client] [123145525469184] - INFO - pools/default params : memoryQuota=1976
[2019-08-21 10:13:29,005] - [rest_client] [123145525469184] - INFO - settings/web params on 172.23.109.179:8091:username=Administrator&password=password&port=8091
[2019-08-21 10:13:29,090] - [remote_util] [123145525469184] - INFO - connecting to 172.23.109.179 with username:root 
[2019-08-21 10:13:29,446] - [remote_util] [123145525469184] - INFO - Connected to 172.23.109.179
[2019-08-21 10:13:29,809] - [remote_util] [123145525469184] - INFO - It could be other operating system.  Go to check at other location
[2019-08-21 10:13:30,677] - [remote_util] [123145525469184] - INFO - running command.raw on 172.23.109.179: curl http://Administrator:password@localhost:8091/diag/eval -X POST -d 'ns_config:set(allow_nonlocal_eval, true).'
[2019-08-21 10:13:30,733] - [remote_util] [123145525469184] - INFO - command executed successfully
[2019-08-21 10:13:30,757] - [rest_client] [123145525469184] - INFO - /diag/eval status on 172.23.109.179:8091: True content: [6,5] command: cluster_compat_mode:get_compat_version().
[2019-08-21 10:13:30,758] - [rest_client] [123145525469184] - INFO - settings/indexes params : storageMode=forestdb
[2019-08-21 10:13:30,785] - [rest_client] [123145525469184] - ERROR - POST http://172.23.109.179:8091/settings/indexes body: storageMode=forestdb headers: {'Content-Type': 'application/x-www-form-urlencoded', 'Accept': '*/*', 'Authorization': 'Basic QWRtaW5pc3RyYXRvcjpwYXNzd29yZA==\n'} error: 400 reason: unknown {"errors":{"storageMode":"The value must be one of the following: [plasma,memory_optimized]"}} auth: Administrator:password
[2019-08-21 10:13:30,843] - [fts_base] [123145496023040] - INFO - 172.23.109.180 will be configured with services kv,fts,n1ql
[2019-08-21 10:13:31,847] - [task] [123145525469184] - INFO - adding node 172.23.109.180:8091 to cluster
[2019-08-21 10:13:31,848] - [rest_client] [123145525469184] - INFO - adding remote node @172.23.109.180:8091 to this cluster @172.23.109.179:8091
[2019-08-21 10:13:35,000] - [rest_client] [123145525469184] - INFO - rebalance params : {'password': 'password', 'ejectedNodes': '', 'user': 'Administrator', 'knownNodes': u'ns_1@172.23.109.179,ns_1@172.23.109.180'}
[2019-08-21 10:13:35,025] - [rest_client] [123145525469184] - INFO - rebalance operation started
[2019-08-21 10:13:35,048] - [rest_client] [123145525469184] - INFO - rebalance percentage : 0.00 %
[2019-08-21 10:13:35,049] - [task] [123145525469184] - INFO - Rebalance - status: running, progress: 0.00%
[2019-08-21 10:13:45,131] - [task] [123145525469184] - INFO - Rebalance - status: none, progress: 100.00%
[2019-08-21 10:13:45,163] - [task] [123145525469184] - INFO - rebalancing was completed with progress: 100% in 10.13758111 sec
[2019-08-21 10:13:45,210] - [remote_util] [123145496023040] - INFO - connecting to 172.23.109.179 with username:root 
[2019-08-21 10:13:45,635] - [remote_util] [123145496023040] - INFO - Connected to 172.23.109.179
[2019-08-21 10:13:45,937] - [remote_util] [123145496023040] - INFO - It could be other operating system.  Go to check at other location
[2019-08-21 10:13:46,750] - [remote_util] [123145496023040] - INFO - running command.raw on 172.23.109.179: curl http://Administrator:password@localhost:8091/diag/eval -X POST -d 'ns_config:set(allow_nonlocal_eval, true).'
[2019-08-21 10:13:46,807] - [remote_util] [123145496023040] - INFO - command executed successfully
[2019-08-21 10:13:46,808] - [fts_base] [123145496023040] - INFO - Enabled diag/eval for non-local hosts from 172.23.109.179
[2019-08-21 10:13:46,905] - [rest_client] [123145496023040] - ERROR - DELETE http://172.23.109.179:8091/settings/rbac/users/local/cbadminbucket body:  headers: {'Content-Type': 'application/x-www-form-urlencoded', 'Accept': '*/*', 'Authorization': 'Basic QWRtaW5pc3RyYXRvcjpwYXNzd29yZA==\n'} error: 404 reason: unknown "User was not found." auth: Administrator:password
[2019-08-21 10:13:46,906] - [internal_user] [123145496023040] - INFO - Exception while deleting user. Exception is -"User was not found."
[2019-08-21 10:13:47,304] - [rest_client] [123145525469184] - INFO - http://172.23.109.179:8091/pools/default/buckets with param: bucketType=membase&evictionPolicy=valueOnly&threadsNumber=3&ramQuotaMB=1476&authType=sasl&name=default&flushEnabled=1&replicaNumber=1&compressionMode=passive&saslPassword=None&replicaIndex=1
[2019-08-21 10:13:47,335] - [rest_client] [123145525469184] - INFO - 0.03 seconds to create bucket default
[2019-08-21 10:13:47,335] - [bucket_helper] [123145525469184] - INFO - waiting for memcached bucket : default in 172.23.109.179 to accept set ops
[2019-08-21 10:13:47,706] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:47,984] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:48,361] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:48,655] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:48,857] - [task] [123145525469184] - WARNING - vbucket map not ready after try 0
[2019-08-21 10:13:48,858] - [bucket_helper] [123145525469184] - INFO - waiting for memcached bucket : default in 172.23.109.179 to accept set ops
[2019-08-21 10:13:49,250] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:49,544] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:49,943] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:50,246] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:50,472] - [task] [123145525469184] - WARNING - vbucket map not ready after try 1
[2019-08-21 10:13:50,473] - [bucket_helper] [123145525469184] - INFO - waiting for memcached bucket : default in 172.23.109.179 to accept set ops
[2019-08-21 10:13:50,817] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:51,125] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:51,543] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:51,856] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:52,074] - [task] [123145525469184] - WARNING - vbucket map not ready after try 2
[2019-08-21 10:13:52,074] - [bucket_helper] [123145525469184] - INFO - waiting for memcached bucket : default in 172.23.109.179 to accept set ops
[2019-08-21 10:13:52,446] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:52,765] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:53,179] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:53,460] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:53,687] - [task] [123145525469184] - WARNING - vbucket map not ready after try 3
[2019-08-21 10:13:53,688] - [bucket_helper] [123145525469184] - INFO - waiting for memcached bucket : default in 172.23.109.179 to accept set ops
[2019-08-21 10:13:54,035] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:54,322] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:54,691] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:54,997] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:55,251] - [task] [123145525469184] - WARNING - vbucket map not ready after try 4
[2019-08-21 10:13:55,252] - [bucket_helper] [123145525469184] - INFO - waiting for memcached bucket : default in 172.23.109.179 to accept set ops
[2019-08-21 10:13:55,615] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:56,327] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:56,700] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.179:11210 default
[2019-08-21 10:13:56,987] - [data_helper] [123145525469184] - INFO - creating direct client 172.23.109.180:11210 default
[2019-08-21 10:13:57,197] - [task] [123145525469184] - WARNING - vbucket map not ready after try 5
[2019-08-21 10:13:57,268] - [rest_client] [123145496023040] - INFO - /diag/eval status on 172.23.109.179:8091: True content: "/opt/couchbase/var/lib/couchbase/logs" command: filename:absname(element(2, application:get_env(ns_server,error_logger_mf_dir))).
[2019-08-21 10:13:57,270] - [remote_util] [123145496023040] - INFO - connecting to 172.23.109.179 with username:root 
[2019-08-21 10:13:57,633] - [remote_util] [123145496023040] - INFO - Connected to 172.23.109.179
[2019-08-21 10:13:58,014] - [remote_util] [123145496023040] - INFO - It could be other operating system.  Go to check at other location
[2019-08-21 10:13:58,836] - [remote_util] [123145496023040] - INFO - running command.raw on 172.23.109.179: zgrep "panic:" "/opt/couchbase/var/lib/couchbase/logs"/fts.log* | wc -l
[2019-08-21 10:13:58,956] - [remote_util] [123145496023040] - INFO - command executed successfully
[2019-08-21 10:13:58,956] - [fts_base] [123145496023040] - INFO - 0
[2019-08-21 10:13:59,082] - [remote_util] [123145496023040] - INFO - connecting to 172.23.109.180 with username:root 
[2019-08-21 10:13:59,442] - [remote_util] [123145496023040] - INFO - Connected to 172.23.109.180
[2019-08-21 10:13:59,765] - [remote_util] [123145496023040] - INFO - It could be other operating system.  Go to check at other location
[2019-08-21 10:14:00,574] - [remote_util] [123145496023040] - INFO - running command.raw on 172.23.109.180: zgrep "panic:" "/opt/couchbase/var/lib/couchbase/logs"/fts.log* | wc -l
[2019-08-21 10:14:00,724] - [remote_util] [123145496023040] - INFO - command executed successfully
[2019-08-21 10:14:00,725] - [fts_base] [123145496023040] - INFO - 0
[2019-08-21 10:14:00,849] - [fts_base] [123145496023040] - INFO - {'172.23.109.179': {'panic:': 0}, '172.23.109.180': {'panic:': 0}}
[2019-08-21 10:14:00,850] - [fts_base] [123145496023040] - INFO - ==== FTSbasetests setup is finished for test #2 test_planfreeze_control ====
[2019-08-21 10:14:00,965] - [remote_util] [123145496023040] - INFO - connecting to 172.23.109.179 with username:root 
[2019-08-21 10:14:01,325] - [remote_util] [123145496023040] - INFO - Connected to 172.23.109.179
[2019-08-21 10:14:01,678] - [remote_util] [123145496023040] - INFO - It could be other operating system.  Go to check at other location
[2019-08-21 10:14:02,477] - [remote_util] [123145496023040] - INFO - running command.raw on 172.23.109.179: curl -v -u Administrator:password                              -X POST http://172.23.109.179:8091/sampleBuckets/install                           -d '["travel-sample"]'
[2019-08-21 10:14:02,598] - [remote_util] [123145496023040] - INFO - command executed successfully
[2019-08-21 10:14:02,720] - [fts_base] [123145496023040] - INFO - sleep for 20 secs.  ...
[2019-08-21 10:14:22,814] - [fts_base] [123145496023040] - INFO - Checking if index already exists ...
[2019-08-21 10:14:22,924] - [rest_client] [123145496023040] - ERROR - GET http://172.23.109.180:8094/api/index/idx_travel_sample_fts body:  headers: {'Content-Type': 'application/json', 'Accept': '*/*', 'Authorization': 'Basic QWRtaW5pc3RyYXRvcjpwYXNzd29yZA==\n'} error: 400 reason: rest_auth: preparePerms, err: index not found {"error":"rest_auth: preparePerms, err: index not found","request":"","status":"fail"} auth: Administrator:password
[2019-08-21 10:14:22,947] - [rest_client] [123145496023040] - ERROR - DELETE http://172.23.109.180:8094/api/index/idx_travel_sample_fts body:  headers: {'Content-Type': 'application/json', 'Accept': '*/*', 'Authorization': 'Basic QWRtaW5pc3RyYXRvcjpwYXNzd29yZA==\n'} error: 400 reason: rest_auth: preparePerms, err: index not found {"error":"rest_auth: preparePerms, err: index not found","request":"","status":"fail"} auth: Administrator:password
[2019-08-21 10:14:22,948] - [fts_base] [123145496023040] - INFO - Creating fulltext-index idx_travel_sample_fts on 172.23.109.180
[2019-08-21 10:14:22,949] - [rest_client] [123145496023040] - INFO - {"params": {"store": {"mossStoreOptions": {}, "kvStoreName": "mossStore", "indexType": "scorch"}}, "name": "idx_travel_sample_fts", "planParams": {}, "sourceName": "travel-sample", "sourceUUID": "", "sourceType": "couchbase", "type": "fulltext-index", "sourceParams": {}, "uuid": ""}
[2019-08-21 10:14:23,066] - [rest_client] [123145496023040] - INFO - Index idx_travel_sample_fts created
[2019-08-21 10:14:23,067] - [fts_base] [123145496023040] - INFO - sleep for 20 secs.  ...
[2019-08-21 10:14:43,072] - [rest_client] [123145496023040] - INFO - calling api : http://172.23.109.180:8094/api/index/idx_travel_sample_fts/planFreezeControl/freeze
[2019-08-21 10:14:43,787] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:14:43,859] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 5385
[2019-08-21 10:14:50,357] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:14:50,462] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 6909
[2019-08-21 10:14:56,785] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:14:56,873] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 8648
[2019-08-21 10:15:03,119] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:15:03,210] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 10161
[2019-08-21 10:15:09,524] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:15:09,620] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 11202
[2019-08-21 10:15:15,891] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:15:15,985] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 13492
[2019-08-21 10:15:22,190] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:15:22,288] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 15199
[2019-08-21 10:15:28,564] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:15:28,675] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 15423
[2019-08-21 10:15:35,106] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:15:35,202] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 17398
[2019-08-21 10:15:41,476] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:15:41,581] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 19007
[2019-08-21 10:15:47,777] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:15:47,868] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 21565
[2019-08-21 10:15:54,385] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:15:54,486] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 23474
[2019-08-21 10:16:00,672] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:16:00,758] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 25015
[2019-08-21 10:16:06,899] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:16:06,989] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 27060
[2019-08-21 10:16:13,199] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:16:13,311] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 29281
[2019-08-21 10:16:19,451] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:16:19,537] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 31591
[2019-08-21 10:16:21,085] - [fts_base] [123145496023040] - INFO - Updating fulltext-index idx_travel_sample_fts on 172.23.109.180
[2019-08-21 10:16:21,086] - [rest_client] [123145496023040] - INFO - {
   "sourceType": "couchbase", 
   "sourceName": "travel-sample", 
   "planParams": {
      "nodePlanParams": {
         "": {}
      }, 
      "planFrozen": true, 
      "maxPartitionsPerPIndex": 171, 
      "indexPartitions": 1
   }, 
   "uuid": "220b527fe58a09dd", 
   "sourceParams": {}, 
   "params": {
      "doc_config": {
         "type_field": "type", 
         "mode": "type_field", 
         "docid_prefix_delim": "", 
         "docid_regexp": ""
      }, 
      "mapping": {
         "default_analyzer": "standard", 
         "default_datetime_parser": "dateTimeOptional", 
         "default_mapping": {
            "enabled": true, 
            "dynamic": true
         }, 
         "index_dynamic": true, 
         "default_type": "_default", 
         "store_dynamic": false, 
         "analysis": {}, 
         "default_field": "_all", 
         "type_field": "_type", 
         "docvalues_dynamic": true
      }, 
      "store": {
         "mossStoreOptions": {}, 
         "indexType": "scorch"
      }
   }, 
   "type": "fulltext-index", 
   "name": "idx_travel_sample_fts"
}
[2019-08-21 10:16:21,264] - [rest_client] [123145496023040] - ERROR - PUT http://172.23.109.180:8094/api/index/idx_travel_sample_fts body: {"sourceType": "couchbase", "sourceName": "travel-sample", "planParams": {"nodePlanParams": {"": {}}, "planFrozen": true, "maxPartitionsPerPIndex": 171, "indexPartitions": 1}, "uuid": "220b527fe58a09dd", "sourceParams": {}, "params": {"doc_config": {"type_field": "type", "mode": "type_field", "docid_prefix_delim": "", "docid_regexp": ""}, "mapping": {"default_analyzer": "standard", "default_datetime_parser": "dateTimeOptional", "default_mapping": {"enabled": true, "dynamic": true}, "index_dynamic": true, "default_type": "_default", "store_dynamic": false, "analysis": {}, "default_field": "_all", "type_field": "_type", "docvalues_dynamic": true}, "store": {"mossStoreOptions": {}, "indexType": "scorch"}}, "type": "fulltext-index", "name": "idx_travel_sample_fts"} headers: {'Content-Type': 'application/json', 'Accept': '*/*', 'Authorization': 'Basic QWRtaW5pc3RyYXRvcjpwYXNzd29yZA==\n'} error: 400 reason: rest_create_index: error creating index: idx_travel_sample_fts, err: manager_api: cannot update partition or replica count for a planFrozen index, indexName: idx_travel_sample_fts {"error":"rest_create_index: error creating index: idx_travel_sample_fts, err: manager_api: cannot update partition or replica count for a planFrozen index, indexName: idx_travel_sample_fts","request":{"name":"idx_travel_sample_fts","params":{"doc_config":{"docid_prefix_delim":"","docid_regexp":"","mode":"type_field","type_field":"type"},"mapping":{"analysis":{},"default_analyzer":"standard","default_datetime_parser":"dateTimeOptional","default_field":"_all","default_mapping":{"dynamic":true,"enabled":true},"default_type":"_default","docvalues_dynamic":true,"index_dynamic":true,"store_dynamic":false,"type_field":"_type"},"store":{"indexType":"scorch","mossStoreOptions":{}}},"planParams":{"indexPartitions":1,"maxPartitionsPerPIndex":171,"nodePlanParams":{"":{}},"planFrozen":true},"sourceName":"travel-sample","sourceParams":{},"sourceType":"couchbase","type":"fulltext-index","uuid":"220b527fe58a09dd"},"status":"fail"} auth: Administrator:password
[2019-08-21 10:16:21,265] - [index_management_api] [123145496023040] - INFO - Error expected :   Error updating index: {"error":"rest_create_index: error creating index: idx_travel_sample_fts, err: manager_api: cannot update partition or replica count for a planFrozen index, indexName: idx_travel_sample_fts","request":{"name":"idx_travel_sample_fts","params":{"doc_config":{"docid_prefix_delim":"","docid_regexp":"","mode":"type_field","type_field":"type"},"mapping":{"analysis":{},"default_analyzer":"standard","default_datetime_parser":"dateTimeOptional","default_field":"_all","default_mapping":{"dynamic":true,"enabled":true},"default_type":"_default","docvalues_dynamic":true,"index_dynamic":true,"store_dynamic":false,"type_field":"_type"},"store":{"indexType":"scorch","mossStoreOptions":{}}},"planParams":{"indexPartitions":1,"maxPartitionsPerPIndex":171,"nodePlanParams":{"":{}},"planFrozen":true},"sourceName":"travel-sample","sourceParams":{},"sourceType":"couchbase","type":"fulltext-index","uuid":"220b527fe58a09dd"},"status":"fail"}

[2019-08-21 10:16:21,550] - [index_management_api] [123145496023040] - INFO - index still not changed  number of docs at present : 31591. Now unfreezing
[2019-08-21 10:16:21,551] - [rest_client] [123145496023040] - INFO - calling api : http://172.23.109.180:8094/api/index/idx_travel_sample_fts/planFreezeControl/unfreeze
[2019-08-21 10:16:22,820] - [fts_base] [123145496023040] - INFO - Updating fulltext-index idx_travel_sample_fts on 172.23.109.180
[2019-08-21 10:16:22,821] - [rest_client] [123145496023040] - INFO - {
   "sourceType": "couchbase", 
   "sourceName": "travel-sample", 
   "planParams": {
      "nodePlanParams": {
         "": {}
      }, 
      "indexPartitions": 1, 
      "maxPartitionsPerPIndex": 171
   }, 
   "uuid": "273ddbc76c46604d", 
   "sourceParams": {}, 
   "params": {
      "doc_config": {
         "type_field": "type", 
         "mode": "type_field", 
         "docid_prefix_delim": "", 
         "docid_regexp": ""
      }, 
      "mapping": {
         "default_analyzer": "standard", 
         "default_datetime_parser": "dateTimeOptional", 
         "default_mapping": {
            "enabled": true, 
            "dynamic": true
         }, 
         "index_dynamic": true, 
         "default_type": "_default", 
         "store_dynamic": false, 
         "analysis": {}, 
         "default_field": "_all", 
         "type_field": "_type", 
         "docvalues_dynamic": true
      }, 
      "store": {
         "mossStoreOptions": {}, 
         "indexType": "scorch"
      }
   }, 
   "type": "fulltext-index", 
   "name": "idx_travel_sample_fts"
}
[2019-08-21 10:16:23,122] - [rest_client] [123145496023040] - INFO - Index/alias idx_travel_sample_fts updated
[2019-08-21 10:16:23,123] - [fts_base] [123145496023040] - INFO - sleeping for 200
[2019-08-21 10:19:43,286] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:19:43,394] - [fts_base] [123145496023040] - INFO - Docs in bucket = 31591, docs in FTS index 'idx_travel_sample_fts': 31591
[2019-08-21 10:19:43,626] - [rest_client] [123145496023040] - INFO - http://172.23.109.179:8091/pools/default/buckets/travel-sample/stats?zoom=minute
[2019-08-21 10:19:43,726] - [fts_base] [123145496023040] - INFO - Docs in index idx_travel_sample_fts=31591, bucket docs=31591
[2019-08-21 10:19:43,776] - [rest_client] [123145496023040] - INFO - /diag/eval status on 172.23.109.179:8091: True content: "/opt/couchbase/var/lib/couchbase/logs" command: filename:absname(element(2, application:get_env(ns_server,error_logger_mf_dir))).
[2019-08-21 10:19:43,777] - [remote_util] [123145496023040] - INFO - connecting to 172.23.109.179 with username:root 
[2019-08-21 10:19:44,142] - [remote_util] [123145496023040] - INFO - Connected to 172.23.109.179
[2019-08-21 10:19:44,497] - [remote_util] [123145496023040] - INFO - It could be other operating system.  Go to check at other location
[2019-08-21 10:19:45,291] - [remote_util] [123145496023040] - INFO - running command.raw on 172.23.109.179: zgrep "panic:" "/opt/couchbase/var/lib/couchbase/logs"/fts.log* | wc -l
[2019-08-21 10:19:45,407] - [remote_util] [123145496023040] - INFO - command executed successfully
[2019-08-21 10:19:45,408] - [fts_base] [123145496023040] - INFO - 0
[2019-08-21 10:19:45,409] - [fts_base] [123145496023040] - INFO - Initial 'panic:' count on 172.23.109.179 :0, now :0
[2019-08-21 10:19:45,534] - [remote_util] [123145496023040] - INFO - connecting to 172.23.109.180 with username:root 
[2019-08-21 10:19:45,898] - [remote_util] [123145496023040] - INFO - Connected to 172.23.109.180
[2019-08-21 10:19:46,226] - [remote_util] [123145496023040] - INFO - It could be other operating system.  Go to check at other location
[2019-08-21 10:19:46,963] - [remote_util] [123145496023040] - INFO - running command.raw on 172.23.109.180: zgrep "panic:" "/opt/couchbase/var/lib/couchbase/logs"/fts.log* | wc -l
[2019-08-21 10:19:47,118] - [remote_util] [123145496023040] - INFO - command executed successfully
[2019-08-21 10:19:47,119] - [fts_base] [123145496023040] - INFO - 0
[2019-08-21 10:19:47,120] - [fts_base] [123145496023040] - INFO - Initial 'panic:' count on 172.23.109.180 :0, now :0
[2019-08-21 10:19:47,247] - [fts_base] [123145496023040] - INFO - ====  FTSbasetests cleanup is started for test #2 test_planfreeze_control ====
[2019-08-21 10:19:47,334] - [fts_base] [123145496023040] - INFO - Deleting fulltext-index idx_travel_sample_fts on 172.23.109.180
[2019-08-21 10:19:47,474] - [remote_util] [123145496023040] - INFO - connecting to 172.23.109.180 with username:root 
[2019-08-21 10:19:47,834] - [remote_util] [123145496023040] - INFO - Connected to 172.23.109.180
[2019-08-21 10:19:48,174] - [remote_util] [123145496023040] - INFO - It could be other operating system.  Go to check at other location
[2019-08-21 10:19:48,900] - [remote_util] [123145496023040] - INFO - running command.raw on 172.23.109.180: ls /opt/couchbase/var/lib/couchbase/data/@fts |grep ^idx_travel_sample_fts | wc -l
[2019-08-21 10:19:49,019] - [remote_util] [123145496023040] - INFO - command executed successfully
[2019-08-21 10:19:49,020] - [fts_base] [123145496023040] - INFO - 1
[2019-08-21 10:19:51,025] - [remote_util] [123145496023040] - INFO - running command.raw on 172.23.109.180: ls /opt/couchbase/var/lib/couchbase/data/@fts |grep ^idx_travel_sample_fts | wc -l
[2019-08-21 10:19:51,075] - [remote_util] [123145496023040] - INFO - command executed successfully
[2019-08-21 10:19:51,076] - [fts_base] [123145496023040] - INFO - 0
[2019-08-21 10:19:53,081] - [fts_base] [123145496023040] - INFO - Validated: all index files for idx_travel_sample_fts deleted from disk
[2019-08-21 10:19:53,084] - [fts_base] [123145496023040] - INFO - removing nodes from cluster ...
[2019-08-21 10:19:53,138] - [fts_base] [123145496023040] - INFO - cleanup [ip:172.23.109.179 port:8091 ssh_username:root, ip:172.23.109.180 port:8091 ssh_username:root]
[2019-08-21 10:19:53,237] - [bucket_helper] [123145496023040] - INFO - deleting existing buckets [u'default', u'travel-sample'] on 172.23.109.179
[2019-08-21 10:19:53,237] - [bucket_helper] [123145496023040] - INFO - remove bucket default ...
[2019-08-21 10:19:54,507] - [bucket_helper] [123145496023040] - INFO - deleted bucket : default from 172.23.109.179
[2019-08-21 10:19:54,508] - [bucket_helper] [123145496023040] - INFO - waiting for bucket deletion to complete....
[2019-08-21 10:19:54,563] - [rest_client] [123145496023040] - INFO - node 172.23.109.179 existing buckets : [u'travel-sample']
[2019-08-21 10:19:54,564] - [bucket_helper] [123145496023040] - INFO - remove bucket travel-sample ...
[2019-08-21 10:19:56,420] - [bucket_helper] [123145496023040] - INFO - deleted bucket : travel-sample from 172.23.109.179
[2019-08-21 10:19:56,421] - [bucket_helper] [123145496023040] - INFO - waiting for bucket deletion to complete....
[2019-08-21 10:19:56,445] - [rest_client] [123145496023040] - INFO - node 172.23.109.179 existing buckets : []
[2019-08-21 10:19:56,446] - [bucket_helper] [123145496023040] - INFO - sleep 2 seconds to make sure all buckets ([u'default', u'travel-sample']) were deleted completely.
[2019-08-21 10:19:58,554] - [cluster_helper] [123145496023040] - INFO - rebalancing all nodes in order to remove nodes
[2019-08-21 10:19:58,577] - [rest_client] [123145496023040] - INFO - rebalance params : {'password': 'password', 'ejectedNodes': u'ns_1@172.23.109.180', 'user': 'Administrator', 'knownNodes': u'ns_1@172.23.109.179,ns_1@172.23.109.180'}
[2019-08-21 10:19:58,605] - [rest_client] [123145496023040] - INFO - rebalance operation started
[2019-08-21 10:19:58,630] - [rest_client] [123145496023040] - INFO - rebalance percentage : 0.00 %
[2019-08-21 10:20:08,660] - [rest_client] [123145496023040] - INFO - rebalance percentage : 66.67 %
[2019-08-21 10:20:28,713] - [rest_client] [123145496023040] - INFO - rebalance progress took 30.11 seconds 
[2019-08-21 10:20:28,714] - [rest_client] [123145496023040] - INFO - sleep for 10 seconds after rebalance...
[2019-08-21 10:20:38,761] - [cluster_helper] [123145496023040] - INFO - removed all the nodes from cluster associated with ip:172.23.109.179 port:8091 ssh_username:root ? [(u'ns_1@172.23.109.180', 8091)]
[2019-08-21 10:20:38,790] - [cluster_helper] [123145496023040] - INFO - waiting for ns_server @ 172.23.109.179:8091
[2019-08-21 10:20:38,816] - [cluster_helper] [123145496023040] - INFO - ns_server @ 172.23.109.179:8091 is running
[2019-08-21 10:20:38,984] - [cluster_helper] [123145496023040] - INFO - waiting for ns_server @ 172.23.109.180:8091
[2019-08-21 10:20:39,018] - [cluster_helper] [123145496023040] - INFO - ns_server @ 172.23.109.180:8091 is running
[2019-08-21 10:20:39,019] - [fts_base] [123145496023040] - INFO - Removing user 'cbadminbucket'...
[2019-08-21 10:20:39,098] - [fts_base] [123145496023040] - INFO - ====  FTSbasetests cleanup is finished for test #2 test_planfreeze_control ===
